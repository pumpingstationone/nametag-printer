# This conf file gets copied into the Docker container to manage both
# the Flask webserver and the RFID reader script using supervisord.
# NOTE: Python logger writes to stderr only.

[supervisord]
nodaemon=true
logfile = /var/log/supervisord.log
logfile_maxbytes = 2MB
logfile_backups = 0

[program:webserver]
command=/usr/local/bin/uv run uvicorn nametags.webserver:asgi_app --host 0.0.0.0 --port 5000
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/webserver.log
stderr_logfile_maxbytes = 2MB
stderr_logfile_backups = 0

[program:rfid]
command=/usr/local/bin/uv run src/rfid.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/rfid.log
stderr_logfile_maxbytes = 2MB
stderr_logfile_backups = 0
